#!/bin/bash
# Lock the screen using swaylock with theme background

# Don't lock if already locked
pidof swaylock && exit 0

# Get current background image
BG_IMAGE="$HOME/.config/nova/current/background"

# Lock with background image if exists
if [[ -e "$BG_IMAGE" ]]; then
    swaylock -f -i "$BG_IMAGE" &
else
    swaylock -f &
fi

# Lock 1password if running
pgrep -x "1password" && 1password --lock 2>/dev/null &

# Stop screensaver if running
pkill -f org.nova.screensaver 2>/dev/null
