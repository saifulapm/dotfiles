#!/bin/bash
# Toggle idle lock (swayidle)
# When enabled: locks screen after 5 min, turns off monitors after 10 min
# When disabled: screen never locks automatically

if pgrep -x swayidle > /dev/null; then
    pkill -x swayidle
    notify-send "Idle Lock" "Disabled - Screen won't lock automatically"
else
    swayidle -w \
        timeout 300 'swaylock -f' \
        timeout 600 'niri msg action power-off-monitors' \
        resume 'niri msg action power-on-monitors' \
        before-sleep 'swaylock -f' &
    notify-send "Idle Lock" "Enabled - Screen locks after 5 min idle"
fi
