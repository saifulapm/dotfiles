#!/bin/bash
# Run a named hook from ~/.config/nova/hooks/
#
# Available hooks:
#   theme-set    - Called after theme is changed (receives theme name as arg)
#   post-update  - Called after system updates
#   post-install - Called after package installations
#
# Example: Create ~/.config/nova/hooks/theme-set with:
#   #!/bin/bash
#   echo "Theme changed to: $1"

set -e

if [[ $# -lt 1 ]]; then
    echo "Usage: nova-hook <hook-name> [args...]"
    echo ""
    echo "Available hooks:"
    echo "  theme-set    - After theme change (arg: theme name)"
    echo "  post-update  - After system updates"
    echo "  post-install - After package installations"
    echo ""
    echo "Hooks directory: ~/.config/nova/hooks/"
    exit 1
fi

HOOK_NAME="$1"
HOOK_PATH="$HOME/.config/nova/hooks/$HOOK_NAME"
shift

# Create hooks directory if it doesn't exist
mkdir -p "$HOME/.config/nova/hooks"

if [[ -f "$HOOK_PATH" && -x "$HOOK_PATH" ]]; then
    bash "$HOOK_PATH" "$@"
fi
